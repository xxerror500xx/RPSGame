<!doctype html>
<html lang="en">

<head>
  <title>Rock, Paper, Scissors |console|</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  <link rel="stylesheet" href="main.css" media="screen" title="no title" charset="utf-8">
</head>

<body onload="getBrowser()">
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
  <div class="container">
    <a class="navbar-brand" href="#">Rock, Paper, Scissors | <small>console</small> |</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/xxerror500xx">My Repos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/xxerror500xx/TOP_RPSGame">This Repo</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
  <div class="container">
    <div class="jumbotron">
      <h1 class="display-3">Please open the Web console to play along.</h1>
      <p id="browser"></p>
      <code id="keyBoardShortCut"></code>
    </div>
    <button class="btn btn-block btn-primary" type="button" name="button" onclick="playGame();">Play</button>
  </div>
  <script type="text/javascript">
    var getBrowser = function() {
      // modified from https://jsfiddle.net/311aLtkz/
      // Firefox 1.0+
      var firefox = typeof InstallTrigger !== 'undefined';
      var chrome = !!window.chrome && !!window.chrome.webstore;
      // Safari 3.0+ "[object HTMLElementConstructor]"
      var safari = /constructor/i.test(window.HTMLElement) || (function(p) {
        return p.toString() === "[object SafariRemoteNotification]";
      })(!window['safari'] || safari.pushNotification);
      // Opera 8.0+
      var opera = (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;
      // Internet Explorer 6-11
      var iE = /*@cc_on!@*/ false || !!document.documentMode;

      var output = 'Browser detected via ducktyping:';
      if (firefox) {
        output += ' Firefox detected!'
        document.getElementById('keyBoardShortCut').innerHTML = "Press Ctrl + Shift + K (Win / Linux) or Cmd + Opt + K (Mac).";
      } else if (chrome) {
        output += ' Chrome detected!'
        document.getElementById('keyBoardShortCut').innerHTML = "Press Ctrl + Shift + J (Win / Linux) or Cmd + Opt + J (Mac). <br> Then choose the Console from the tabs.";
      } else if (safari) {
        output += ' Safari detected!'
        document.getElementById('keyBoardShortCut').innerHTML = "Press Opt + Cmd + i (Mac)";
      } else if (opera) {
        output += ' Opera detected!'
        document.getElementById('keyBoardShortCut').innerHTML = "ctrl + shift + k";
      } else if (iE) {
        output += ' IE detected! ... ... Hmm...'
        document.getElementById('keyBoardShortCut').innerHTML = "Press F12";
      } else {
        output += ' Hmmm... I have no Idea what browser you are using. <br>  Sorry might need to google how to open the console or if this browser has a console. GL'
        document.getElementById('keyBoardShortCut').innerHTML = "!0_o! :( Sorry!";
      }
      console.log(output);
      document.getElementById('browser').innerHTML = output;
    }

    const weapons = ["rock", "paper", "scissors"];
    const maxRounds = 5;
    var round = 0;
    var gameNum = 0;
    var gameWin = 0;
    var playerScore = 0;
    var computerScore = 0;

    var stats = function() {
      // console.log("in stats()");
      console.log("Score: " + playerScore + " to: " + computerScore);
      console.log("Games: " + gameWin + "/" + gameNum + " R: " + round + "/" + maxRounds);
    }
    var computerPlay = function() {
      // console.log("in computerPlay()");
      var weapon = weapons[Math.floor(Math.random() * weapons.length)]
      weapon = weapon.toLowerCase();
      weapon = weapon.charAt(0).toUpperCase() + weapon.slice(1); // converts the first letter to Uppercase
      return weapon;
    }
    var getPlayerResponse = function(msg) {
      // console.log("in getplayerResponse()");
      console.log(msg);
      var response = "";
      response = prompt(msg); // This would be REGEX sanitized for the usual culprits (extra chars / spaces + words)
      if (response === "") {
        console.log("That was not a proper input. C'mon!");
        msg = "Let's try again, Please choose Rock, Paper, or Scissors.";
        response = prompt(msg);
        if (response === "") {
          msg = "Seriously? Please choose Rock, Paper, or Scissors.";
          getPlayerResponse(msg);
        }
        return response;
      } else if (response === null) {
        console.log("Dont feel like playing eh?");
        return null;
      } else if (weapons.includes(response.toLowerCase())) {
        response = response.toLowerCase();
        response = response.charAt(0).toUpperCase() + response.slice(1); // converts the first letter to Uppercase
        console.log("You chose " + response + "!")
        return response;
      } else {
        alert("SUMONE SET US UP THE BOMB!!!! ALLYOURBASEAREBELONGTOUS!!!");
        console.log("REALLY!!! Please choose Rock, Paper, or Scissors. Singular, no extra chars / spaces, no extra words.... UGH!! You lose this round!");
        console.log("You tried to enter " + response);
        console.log("I'm hijacking your response!")
        return "Face"; // Rewrite response for humor
      }
    }

    var playerPlay = function() {
      // console.log("in playerPlay()");
      var playerChoice = getPlayerResponse("Please choose Rock, Paper, or Scissors.");
      return playerChoice;
    }

    var playRound = function(playerSelection, computerSelection) {
      //console.log("in playRound()");
      var results = "";
      if (playerSelection === computerSelection) {
        console.log(playerSelection + " Vs. " + computerSelection);
        console.log("Tie - Replay that round");
      } else if ((playerSelection === "Rock") && (computerSelection !== "Paper")) {
        console.log(playerSelection + " Vs. " + computerSelection);
        console.log("You win!");
        playerScore++;
        round++;
      } else if ((playerSelection === "Paper") && (computerSelection !== "Scissors")) {
        console.log(playerSelection + " Vs. " + computerSelection);
        console.log("You win!");
        playerScore++;
        round++;
      } else if ((playerSelection === "Scissors") && (computerSelection !== "Rock")) {
        console.log(playerSelection + " Vs. " + computerSelection);
        console.log("You win!");
        playerScore++;
        round++;
      } else if (playerSelection === null) {
        console.log("come back and play again real soon!");
      } else if (playerSelection === "") {
        console.log("SMH!!!! You failed to understand this game at this time!");
      } else {
        console.log(playerSelection + " Vs. " + computerSelection);
        console.log("You lost");
        computerScore++;
        round++;
      }
      stats();
    }
    var playGame = function() {
      if (gameNum === 0 && round === 0) {
        console.log("Welcome to your first game of RPS! GLHF!");
        playRound(playerPlay(), computerPlay());
      } else if (round === maxRounds) {
        console.log("ready for another Game I see! Let's do this!!!");
        gameNum++;
        if (playerScore > computerScore) {
          gameWin++;
          alert("Gongratz on the Win " + playerScore + " - " + computerScore + " You have won " + gameWin + "/" + gameNum + " times!")
        } else {
          alert("Sorry about the Loss buddy! " + playerScore + " - " + computerScore + " :( You have won " + gameWin + "/" + gameNum + " times!")
        }
        playerScore = 0;
        computerScore = 0;
        round = 0;
        playRound(playerPlay(), computerPlay());
      } else {
        console.log("New round!");
        playRound(playerPlay(), computerPlay());
      }
    }
  </script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
</body>

</html>
